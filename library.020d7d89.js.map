{"mappings":"siBAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAcC,SAASC,cAAc,iBACrCC,EAAgBF,SAASC,cAAc,mBACvCE,EAAaH,SAASC,cAAc,UACpCG,EAAYJ,SAASC,cAAc,gBAmBzC,SAASI,EAAiBC,GACxB,MAAMC,GAAa,EAAAC,EAAAC,gBAAeH,GAC9BC,GAAcA,EAAWG,OAAS,GAaxC,SAAoBC,GAClB,MAAMC,GAAc,EAAAJ,EAAAC,gBAAe,aAC7BI,EAAY,GAClBD,EAAYE,SAAQC,IAClBF,EAAUE,EAAMC,IAAMD,CAAK,IAE7B,MAAME,EAAiBN,EACpBO,KAAIC,I,IAMDC,EAAgCC,EALlC,MAAMC,EAAkBH,EAAGI,UAAUL,KAAIF,GAChCH,EAAUG,GAAIV,OAEjBkB,EAAQL,EAAGb,MAAQa,EAAGK,MACtBC,GACW,QAAfL,EAAAD,EAAGO,oBAAY,IAAfN,OAAA,EAAAA,EAAiBO,MAAM,EAAG,MAAuB,QAAjBN,EAAAF,EAAGS,sBAAc,IAAjBP,OAAA,EAAAA,EAAmBM,MAAM,EAAG,IACxDE,EAAMV,EAAGW,YACTC,EAASZ,EAAGa,aAAaC,QAAQ,GAEvC,MAAO,mFACsCJ,0GAEfL,iFAJhBF,EAAgBY,KAAK,iEAONT,4CACCM,sDAGxB,IAEPG,KAAK,IAERrC,EAAAsC,KAAKC,eAAeC,mBAAmB,aAAcpB,E,CA3CnDqB,CAAW/B,E,CA8Cf,SAASgC,EAAYpB,GACnBA,EAAGqB,aAAa,WAAY,G,CAE9B,SAASC,EAAetB,GACtBA,EAAGuB,gBAAgB,W,CAErB,SAASC,IACPvC,EAAUwC,UAAY,GACtBzC,EAAW0C,WAAWD,UAAY,E,CA1EpC1C,EAAc4C,iBAAiB,SAU/B,WACEH,IACAtC,EAAiB,SACjBkC,EAAYrC,GACZuC,EAAe1C,E,IAbjBA,EAAY+C,iBAAiB,SAE7B,WACEH,IACAtC,EAAiB,SACjBoC,EAAevC,GACfqC,EAAYxC,E","sources":["src/js/dom/my_library.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nconst queueButton = document.querySelector('.queue_button');\nconst watchedButton = document.querySelector('.watched_button');\nconst cardsAlert = document.querySelector('.cards');\nconst cardsList = document.querySelector('.cards__list');\n\nwatchedButton.addEventListener('click', handleClickWatched);\nqueueButton.addEventListener('click', handleClickQueue);\n\nfunction handleClickQueue() {\n  deletedMessage();\n  renderSavedFilms('queue');\n  removeDisabled(watchedButton);\n  setDisabled(queueButton);\n}\n\nfunction handleClickWatched() {\n  deletedMessage();\n  renderSavedFilms('watch');\n  setDisabled(watchedButton);\n  removeDisabled(queueButton);\n}\n\nfunction renderSavedFilms(name) {\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRender(addedFilms);\n  } else {\n    // const stringAlert = `\n    // <div class=\"container\"><div class=\"alert__mеssаge\">\n    //   <span class=\"sorry\"> Sorry :(</span>\n    //   <p class=\"string__alert\"> No movies have been added yet</p>\n    //   </div><>\n    //   `;\n    // cardsAlert.insertAdjacentHTML('afterend', stringAlert);\n  }\n}\n\nfunction cardRender(result) {\n  const genresArray = getFromStorage('allGenres');\n  const genresObj = {};\n  genresArray.forEach(genre => {\n    genresObj[genre.id] = genre;\n  });\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genre_ids.map(id => {\n        return genresObj[id].name;\n      });\n      const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">    \n        <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"card__img\">\n        <div class=\"card__info\">\n          <h2 class=\"card__title\">${title}</h2>\n         <div class=\"card__decr\">  \n          <p class=\"card__genre\">${genre} <span> | </span> </p>\n           <p class=\"card__year\">${year}</p>\n          <p class=\"card__rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n}\nfunction deletedMessage() {\n  cardsList.innerHTML = '';\n  cardsAlert.firstChild.innerHTML = '';\n}\n"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$queueButton","document","querySelector","$e5f0ec2bf84d8f14$var$watchedButton","$e5f0ec2bf84d8f14$var$cardsAlert","$e5f0ec2bf84d8f14$var$cardsList","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","addedFilms","$cXfU0","getFromStorage","length","result","genresArray","genresObj","forEach","genre","id","cardListString","map","el","ref","ref1","filmGenresArray","genre_ids","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","join","refs","cardsContainer","insertAdjacentHTML","$e5f0ec2bf84d8f14$var$cardRender","$e5f0ec2bf84d8f14$var$setDisabled","setAttribute","$e5f0ec2bf84d8f14$var$removeDisabled","removeAttribute","$e5f0ec2bf84d8f14$var$deletedMessage","innerHTML","firstChild","addEventListener"],"version":3,"file":"library.020d7d89.js.map"}