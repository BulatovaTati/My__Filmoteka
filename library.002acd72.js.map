{"mappings":"kjBAAA,IAAAA,EAAAC,EAAA,S,aAGMC,EAAcC,SAASC,cAAc,iBACrCC,EAAgBF,SAASC,cAAc,mBACvCE,EAAaH,SAASC,cAAc,UACpCG,EAAYJ,SAASC,cAAc,gBAmBzC,SAASI,EAAiBC,GACxB,IAAMC,GAAa,EAAAC,EAAAC,gBAAeH,GAClC,GAAIC,GAAcA,EAAWG,OAAS,GAaxC,SAAoBC,GAClB,IAAMC,GAAc,EAAAJ,EAAAC,gBAAe,aAC7BI,EAAY,GAClBD,EAAYE,SAAQ,SAAAC,GAClBF,EAAUE,EAAMC,IAAMD,C,IAExB,IAAME,EAAiBN,EACpBO,KAAI,SAAAC,G,IAMDC,EAAgCC,EAL5BC,EAAkBH,EAAGI,UAAUL,KAAI,SAAAF,GACvC,OAAOH,EAAUG,GAAIV,I,IAEjBkB,EAAQL,EAAGb,MAAQa,EAAGK,MACtBC,GACW,QAAfL,EAAAD,EAAGO,oBAAY,IAAfN,OAAA,EAAAA,EAAiBO,MAAM,EAAG,MAAuB,QAAjBN,EAAAF,EAAGS,sBAAc,IAAjBP,OAAA,EAAAA,EAAmBM,MAAM,EAAG,IACxDE,EAAMV,EAAGW,YACTC,EAASZ,EAAGa,aAAaC,QAAQ,GACjClB,EAAQO,EAAgBY,KAAK,MACnC,MAAO,mFAGuBC,OAFeN,EAAI,0GAIpBM,OAFCX,EAAM,iFAGPW,OADApB,EAAM,6DAELoB,OADDV,EAAK,4CACGU,OAAPJ,EAAO,sD,IAKtCG,KAAK,IAERrC,EAAAuC,KAAKC,eAAeC,mBAAmB,aAAcrB,E,CA3CnDsB,CAAWhC,OACN,CAOLJ,EAAWmC,mBAAmB,WANT,iM,EA4CzB,SAASE,EAAYrB,GACnBA,EAAGsB,aAAa,WAAY,G,CAE9B,SAASC,EAAevB,GACtBA,EAAGwB,gBAAgB,W,CAErB,SAASC,IACPxC,EAAUyC,UAAY,GACtB1C,EAAW2C,WAAWD,UAAY,E,CClEpC,GDRA3C,EAAc6C,iBAAiB,SAU/B,WACEH,IACAvC,EAAiB,SACjBmC,EAAYtC,GACZwC,EAAe3C,E,IAbjBA,EAAYgD,iBAAiB,SAE7B,WACEH,IACAvC,EAAiB,SACjBqC,EAAexC,GACfsC,EAAYzC,E,0BCDFC,SAASC,cAAc,oBAE1B,CACP,IAAM+C,EAAShD,SAASC,cAAc,WACtC+C,EAAOC,MAAMC,SAAW,WACxBF,EAAOC,MAAME,OAAS,G","sources":["src/js/dom/my_library.js","src/index-library.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nconst queueButton = document.querySelector('.queue_button');\nconst watchedButton = document.querySelector('.watched_button');\nconst cardsAlert = document.querySelector('.cards');\nconst cardsList = document.querySelector('.cards__list');\n\nwatchedButton.addEventListener('click', handleClickWatched);\nqueueButton.addEventListener('click', handleClickQueue);\n\nfunction handleClickQueue() {\n  deletedMessage();\n  renderSavedFilms('queue');\n  removeDisabled(watchedButton);\n  setDisabled(queueButton);\n}\n\nfunction handleClickWatched() {\n  deletedMessage();\n  renderSavedFilms('watch');\n  setDisabled(watchedButton);\n  removeDisabled(queueButton);\n}\n\nfunction renderSavedFilms(name) {\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRender(addedFilms);\n  } else {\n    const stringAlert = `\n    <div class=\"container\"><div class=\"alert__mеssаge\">\n      <span class=\"sorry\"> Sorry :(</span>\n      <p class=\"string__alert\"> No movies have been added yet</p>\n      </div>\n      `;\n    cardsAlert.insertAdjacentHTML('afterend', stringAlert);\n  }\n}\n\nfunction cardRender(result) {\n  const genresArray = getFromStorage('allGenres');\n  const genresObj = {};\n  genresArray.forEach(genre => {\n    genresObj[genre.id] = genre;\n  });\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genre_ids.map(id => {\n        return genresObj[id].name;\n      });\n      const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">    \n        <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"card__img\">\n        <div class=\"card__info\">\n          <h2 class=\"card__title\">${title}</h2>\n         <div class=\"card__decr\">  \n          <p class=\"card__genre\">${genre} <span> | </span> </p>\n           <p class=\"card__year\">${year}</p>\n          <p class=\"card__rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n}\nfunction deletedMessage() {\n  cardsList.innerHTML = '';\n  cardsAlert.firstChild.innerHTML = '';\n}\n","import './sass/index.scss';\n// Api\nimport './js/api/api-index';\n\n// common\nimport './js/common/refs';\nimport './js/common/spinner';\n// Dom\nimport './js/dom/changeGenresToName';\nimport './js/dom/create-movie-markup';\nimport './js/dom/modal-footer';\nimport './js/dom/my_library';\nimport './js/dom/scrollToTop';\nimport './js/other/other-index';\nconst doc = document.querySelector('.header__library');\n\nif (doc) {\n  const footer = document.querySelector('.footer');\n  footer.style.position = 'absolute';\n  footer.style.bottom = '0';\n}\n"],"names":["$ihtdk","parcelRequire","$9d816f78cf7ff948$var$queueButton","document","querySelector","$9d816f78cf7ff948$var$watchedButton","$9d816f78cf7ff948$var$cardsAlert","$9d816f78cf7ff948$var$cardsList","$9d816f78cf7ff948$var$renderSavedFilms","name","addedFilms","$kZ2no","getFromStorage","length","result","genresArray","genresObj","forEach","genre","id","cardListString","map","el","ref","ref1","filmGenresArray","genre_ids","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","join","concat","refs","cardsContainer","insertAdjacentHTML","$9d816f78cf7ff948$var$cardRender","$9d816f78cf7ff948$var$setDisabled","setAttribute","$9d816f78cf7ff948$var$removeDisabled","removeAttribute","$9d816f78cf7ff948$var$deletedMessage","innerHTML","firstChild","addEventListener","$e4cd66a41bacdb89$var$footer","style","position","bottom"],"version":3,"file":"library.002acd72.js.map"}