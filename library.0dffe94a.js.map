{"mappings":"siBAAA,IAAAA,EAAAC,EAAA,S,aAoBA,SAASC,EAAiBC,GAiDxBH,EAAAI,KAAKC,eAAeC,UAAY,GA/ChC,MAAMC,GAAa,EAAAC,EAAAC,gBAAeN,GAC9BI,GAAcA,EAAWG,OAAS,IAQxC,SAAuBC,GACrB,MAAMC,EAAiBD,EACpBE,KAAIC,I,IAMDC,EAAgCC,EALlC,MAAMC,EAAkBH,EAAGI,OAAOL,KAAIM,GAC7BA,EAAShB,OAEZiB,EAAQN,EAAGX,MAAQW,EAAGM,MACtBC,GACW,QAAfN,EAAAD,EAAGQ,oBAAY,IAAfP,OAAA,EAAAA,EAAiBQ,MAAM,EAAG,MAAuB,QAAjBP,EAAAF,EAAGU,sBAAc,IAAjBR,OAAA,EAAAA,EAAmBO,MAAM,EAAG,IACxDE,EAAMX,EAAGY,YACTC,EAASb,EAAGc,aAAaC,QAAQ,GAEvC,MAAO,iHACwEJ,2HAEjDL,iFAJhBH,EAAgBa,KAAK,iEAONT,4CACCM,sDAGxB,IAEPG,KAAK,IAER9B,EAAAI,KAAKC,eAAe0B,mBAAmB,aAAcnB,E,CAjCnDoB,CAAczB,GACdP,EAAAI,KAAK6B,eAAeC,UAAUC,IAAI,oBAElCnC,EAAAI,KAAK6B,eAAeC,UAAUE,OAAO,kB,CAiCzC,SAASC,EAAYvB,GACnBA,EAAGwB,aAAa,WAAY,IAC5BxB,EAAGoB,UAAUC,IAAI,gB,CAEnB,SAASI,EAAezB,GACtBA,EAAG0B,gBAAgB,YACnB1B,EAAGoB,UAAUE,OAAO,gB,CA/DtBpC,EAAAI,KAAKqC,cAAcC,iBAAiB,SAWpC,WACExC,EAAiB,SACjBmC,EAAYrC,EAAAI,KAAKqC,eACjBF,EAAevC,EAAAI,KAAKuC,Y,IAbtB3C,EAAAI,KAAKuC,YAAYD,iBAAiB,SAIlC,WACExC,EAAiB,SACjBqC,EAAevC,EAAAI,KAAKqC,eACpBJ,EAAYrC,EAAAI,KAAKuC,Y,IALnBzC,EAAiB,S","sources":["src/js/dom/my_library.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nrefs.watchedButton.addEventListener('click', handleClickWatched);\nrefs.queueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(refs.watchedButton);\n  setDisabled(refs.queueButton);\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(refs.watchedButton);\n  removeDisabled(refs.queueButton);\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRendering(addedFilms);\n    refs.noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    refs.noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction cardRendering(result) {\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genres.map(genreObj => {\n        return genreObj.name;\n      });\n      const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">\n      <div class=\"card__img--container \"> <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"card__img\"></div>    \n               <div class=\"card__info\">\n          <h2 class=\"card__title\">${title}</h2>\n         <div class=\"card__decr\">  \n          <p class=\"card__genre\">${genre} <span> | </span> </p>\n           <p class=\"card__year\">${year}</p>\n          <p class=\"card__rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n  el.classList.add('button-active');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n  el.classList.remove('button-active');\n}\nfunction clearFilmList() {\n  refs.cardsContainer.innerHTML = '';\n}\n"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","refs","cardsContainer","innerHTML","addedFilms","$cXfU0","getFromStorage","length","result","cardListString","map","el","ref","ref1","filmGenresArray","genres","genreObj","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","join","insertAdjacentHTML","$e5f0ec2bf84d8f14$var$cardRendering","noFilmsMessage","classList","add","remove","$e5f0ec2bf84d8f14$var$setDisabled","setAttribute","$e5f0ec2bf84d8f14$var$removeDisabled","removeAttribute","watchedButton","addEventListener","queueButton"],"version":3,"file":"library.0dffe94a.js.map"}