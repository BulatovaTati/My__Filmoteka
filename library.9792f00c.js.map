{"mappings":"kjBAAA,IAAAA,EAAAC,EAAA,S,aAoBA,SAASC,EAAiBC,GAiDxBH,EAAAI,KAAKC,eAAeC,UAAY,GA/ChC,IAUMC,EAVAC,GAAa,EAAAC,EAAAC,gBAAeP,GAC9BK,GAAcA,EAAWG,OAAS,GAShCJ,EARUC,EASbI,KAAI,SAAAC,G,IAMDC,EAAgCC,EAL5BC,EAAkBH,EAAGI,OAAOL,KAAI,SAAAM,GACpC,OAAOA,EAASf,I,IAEZgB,EAAQN,EAAGV,MAAQU,EAAGM,MACtBC,GACW,QAAfN,EAAAD,EAAGQ,oBAAY,IAAfP,OAAA,EAAAA,EAAiBQ,MAAM,EAAG,MAAuB,QAAjBP,EAAAF,EAAGU,sBAAc,IAAjBR,OAAA,EAAAA,EAAmBO,MAAM,EAAG,IACxDE,EAAMX,EAAGY,YACTC,EAASb,EAAGc,aAAaC,QAAQ,GACjCC,EAAQb,EAAgBc,KAAK,MACnC,MAAO,iHAGuBC,OAFiDP,EAAI,2HAItDO,OAFCZ,EAAM,iFAGPY,OADAF,EAAM,6DAELE,OADDX,EAAK,4CACGW,OAAPL,EAAO,sD,IAKtCI,KAAK,IAER9B,EAAAI,KAAKC,eAAe2B,mBAAmB,aAAczB,GAhCnDP,EAAAI,KAAK6B,eAAeC,UAAUC,IAAI,oBAElCnC,EAAAI,KAAK6B,eAAeC,UAAUE,OAAO,kB,CAiCzC,SAASC,EAAYxB,GACnBA,EAAGyB,aAAa,WAAY,IAC5BzB,EAAGqB,UAAUC,IAAI,gB,CAEnB,SAASI,EAAe1B,GACtBA,EAAG2B,gBAAgB,YACnB3B,EAAGqB,UAAUE,OAAO,gB,CA/DtBpC,EAAAI,KAAKqC,cAAcC,iBAAiB,SAWpC,WACExC,EAAiB,SACjBmC,EAAYrC,EAAAI,KAAKqC,eACjBF,EAAevC,EAAAI,KAAKuC,Y,IAbtB3C,EAAAI,KAAKuC,YAAYD,iBAAiB,SAIlC,WACExC,EAAiB,SACjBqC,EAAevC,EAAAI,KAAKqC,eACpBJ,EAAYrC,EAAAI,KAAKuC,Y,IALnBzC,EAAiB,S","sources":["src/js/dom/my_library.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nrefs.watchedButton.addEventListener('click', handleClickWatched);\nrefs.queueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(refs.watchedButton);\n  setDisabled(refs.queueButton);\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(refs.watchedButton);\n  removeDisabled(refs.queueButton);\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRendering(addedFilms);\n    refs.noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    refs.noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction cardRendering(result) {\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genres.map(genreObj => {\n        return genreObj.name;\n      });\n      const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">\n      <div class=\"card__img--container \"> <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"card__img\"></div>    \n               <div class=\"card__info\">\n          <h2 class=\"card__title\">${title}</h2>\n         <div class=\"card__decr\">  \n          <p class=\"card__genre\">${genre} <span> | </span> </p>\n           <p class=\"card__year\">${year}</p>\n          <p class=\"card__rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n  el.classList.add('button-active');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n  el.classList.remove('button-active');\n}\nfunction clearFilmList() {\n  refs.cardsContainer.innerHTML = '';\n}\n"],"names":["$ihtdk","parcelRequire","$9d816f78cf7ff948$var$renderSavedFilms","name","refs","cardsContainer","innerHTML","cardListString","addedFilms","$kZ2no","getFromStorage","length","map","el","ref","ref1","filmGenresArray","genres","genreObj","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","genre","join","concat","insertAdjacentHTML","noFilmsMessage","classList","add","remove","$9d816f78cf7ff948$var$setDisabled","setAttribute","$9d816f78cf7ff948$var$removeDisabled","removeAttribute","watchedButton","addEventListener","queueButton"],"version":3,"file":"library.9792f00c.js.map"}