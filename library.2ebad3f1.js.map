{"mappings":"siBAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAcC,SAASC,cAAc,iBACrCC,EAAgBF,SAASC,cAAc,mBAEvCE,GADeH,SAASC,cAAc,UAC1BD,SAASC,cAAc,iBACnCG,EAAiBJ,SAASC,cAAc,mBAmB9C,SAASI,EAAiBC,GAgDxBH,EAAUI,UAAY,GA7CtB,MAAMC,GAAa,EAAAC,EAAAC,gBAAeJ,GAC9BE,GAAcA,EAAWG,OAAS,IAQxC,SAAoBC,GAClB,MAAMC,EAAiBD,EACpBE,KAAIC,I,IAMDC,EAAgCC,EALlC,MAAMC,EAAkBH,EAAGI,OAAOL,KAAIM,GAC7BA,EAASd,OAEZe,EAAQN,EAAGT,MAAQS,EAAGM,MACtBC,GACW,QAAfN,EAAAD,EAAGQ,oBAAY,IAAfP,OAAA,EAAAA,EAAiBQ,MAAM,EAAG,MAAuB,QAAjBP,EAAAF,EAAGU,sBAAc,IAAjBR,OAAA,EAAAA,EAAmBO,MAAM,EAAG,IACxDE,EAAMX,EAAGY,YACTC,EAASb,EAAGc,aAAaC,QAAQ,GAEvC,MAAO,mFACsCJ,0GAEfL,iFAJhBH,EAAgBa,KAAK,iEAONT,4CACCM,sDAGxB,IAEPG,KAAK,IAERlC,EAAAmC,KAAKC,eAAeC,mBAAmB,aAAcrB,E,CAjCnDsB,CAAW3B,GACXJ,EAAegC,UAAUC,IAAI,oBAE7BjC,EAAegC,UAAUE,OAAO,kB,CAiCpC,SAASC,EAAYxB,GACnBA,EAAGyB,aAAa,WAAY,G,CAE9B,SAASC,EAAe1B,GACtBA,EAAG2B,gBAAgB,W,CA9DrBxC,EAAcyC,iBAAiB,SAW/B,WACEtC,EAAiB,SACjBkC,EAAYrC,GACZuC,EAAe1C,E,IAbjBA,EAAY4C,iBAAiB,SAI7B,WACEtC,EAAiB,SACjBoC,EAAevC,GACfqC,EAAYxC,E,IALdM,EAAiB,S,sBCIjB,GAFYL,SAASC,cAAc,oBAE1B,CACP,MAAM2C,EAAS5C,SAASC,cAAc,WACtC2C,EAAOC,MAAMC,SAAW,WACxBF,EAAOC,MAAME,OAAS,G","sources":["src/js/dom/my_library.js","src/index-library.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nconst queueButton = document.querySelector('.queue_button');\nconst watchedButton = document.querySelector('.watched_button');\nconst cardsSection = document.querySelector('.cards');\nconst cardsList = document.querySelector('.cards__list');\nconst noFilmsMessage = document.querySelector('.alert__mеssаge');\n\nwatchedButton.addEventListener('click', handleClickWatched);\nqueueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(watchedButton);\n  setDisabled(queueButton);\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(watchedButton);\n  removeDisabled(queueButton);\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRender(addedFilms);\n    noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction cardRender(result) {\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genres.map(genreObj => {\n        return genreObj.name;\n      });\n      const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">    \n        <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"card__img\">\n        <div class=\"card__info\">\n          <h2 class=\"card__title\">${title}</h2>\n         <div class=\"card__decr\">  \n          <p class=\"card__genre\">${genre} <span> | </span> </p>\n           <p class=\"card__year\">${year}</p>\n          <p class=\"card__rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n}\nfunction clearFilmList() {\n  cardsList.innerHTML = '';\n}\n","import './sass/index.scss';\n// Api\nimport './js/api/api-index';\n\n// common\nimport './js/common/refs';\nimport './js/common/spinner';\n// Dom\nimport './js/dom/changeGenresToName';\nimport './js/dom/create-movie-markup';\nimport './js/dom/modal-footer';\nimport './js/dom/my_library';\nimport './js/dom/scrollToTop';\nimport './js/other/other-index';\nconst doc = document.querySelector('.header__library');\n\nif (doc) {\n  const footer = document.querySelector('.footer');\n  footer.style.position = 'absolute';\n  footer.style.bottom = '0';\n}\n"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$queueButton","document","querySelector","$e5f0ec2bf84d8f14$var$watchedButton","$e5f0ec2bf84d8f14$var$cardsList","$e5f0ec2bf84d8f14$var$noFilmsMessage","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","innerHTML","addedFilms","$cXfU0","getFromStorage","length","result","cardListString","map","el","ref","ref1","filmGenresArray","genres","genreObj","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","join","refs","cardsContainer","insertAdjacentHTML","$e5f0ec2bf84d8f14$var$cardRender","classList","add","remove","$e5f0ec2bf84d8f14$var$setDisabled","setAttribute","$e5f0ec2bf84d8f14$var$removeDisabled","removeAttribute","addEventListener","footer","style","position","bottom"],"version":3,"file":"library.2ebad3f1.js.map"}