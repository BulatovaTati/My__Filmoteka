{"mappings":"ijBAmBA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAcC,SAASC,cAAc,iBAe3C,SAASC,EAAiBC,GACxB,MAAMC,GAAa,EAAAC,EAAAC,gBAAeH,GAC9BC,GAAcA,EAAWG,OAAS,EAOxC,SAAoBC,GAClB,MAAMC,GAAc,EAAAJ,EAAAC,gBAAe,aAC7BI,EAAY,GAClBD,EAAYE,SAAQC,IAClBF,EAAUE,EAAMC,IAAMD,CAAK,IAE7B,MAAME,EAAiBN,EACpBO,KAAIC,I,IAMDC,EAAgCC,EALlC,MAAMC,EAAkBH,EAAGI,UAAUL,KAAIF,GAChCH,EAAUG,GAAIV,OAEfkB,EAAQL,EAAGb,MAAQa,EAAGK,MACxBC,GACW,QAAfL,EAAAD,EAAGO,oBAAY,IAAfN,OAAA,EAAAA,EAAiBO,MAAM,EAAG,MAAuB,QAAjBN,EAAAF,EAAGS,sBAAc,IAAjBP,OAAA,EAAAA,EAAmBM,MAAM,EAAG,IACxDE,EAAMV,EAAGW,YACTC,EAASZ,EAAGa,aAAaC,QAAQ,GAEvC,MAAO,mFACsCJ,iIAEJL,uHAJ3BF,EAAgBY,KAAK,4DAOMT,uDACAM,sDAGnC,IAEPG,KAAK,IAERlC,EAAAmC,KAAKC,eAAeC,mBAAmB,aAAcpB,E,CArCnDqB,CAAW/B,GAEXgC,MAAM,kC,CAnBYpC,SAASC,cAAc,mBAE/BoC,iBAAiB,SAQ/B,WACEnC,EAAiB,W,IAPnBH,EAAYsC,iBAAiB,SAE7B,WACEnC,EAAiB,W","sources":["src/js/dom/my_library.js"],"sourcesContent":["// settings = [\n//   {\n//     title: 'Terminator 3',\n//     vote_average: 8.28,\n//     img: 'https://upload.wikimedia.org/wikipedia/ru/c/ca/Terminator_poster.jpg',\n//     release_date: '2022.12.20',\n//     genre_ids: [28, 36, 99],\n//   },\n//   {\n//     title: 'Rambo 3',\n//     vote_average: 7.945,\n//     img: 'https://m.media-amazon.com/images/M/MV5BODBmOWU2YWMtZGUzZi00YzRhLWJjNDAtYTUwNWVkNDcyZmU5XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_.jpg',\n//     first_air_date: '2022.12.20',\n//     genre_ids: [35, 14, 53],\n//   },\n// ];\n\n// localStorage.setItem('settings', JSON.stringify(settings));\n\nimport { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\n\nconst queueButton = document.querySelector('.queue_button');\nconst watchedButton = document.querySelector('.watched_button');\n\nwatchedButton.addEventListener('click', handleClickWatched);\n\nqueueButton.addEventListener('click', handleClickQueue);\n\nfunction handleClickQueue() {\n  renderSavedFilms('settings');\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('settings');\n}\n\nfunction renderSavedFilms(name) {\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    cardRender(addedFilms);\n  } else {\n    alert('Вибачте, жоднен фільм не додано');\n  }\n}\n\nfunction cardRender(result) {\n  const genresArray = getFromStorage('allGenres');\n  const genresObj = {};\n  genresArray.forEach(genre => {\n    genresObj[genre.id] = genre;\n  });\n  const cardListString = result\n    .map(el => {\n      const filmGenresArray = el.genre_ids.map(id => {\n        return genresObj[id].name;\n      });\n        const title = el.name || el.title;\n      const year =\n        el.release_date?.slice(0, 4) || el.first_air_date?.slice(0, 4);\n      const src = el.poster_path;\n      const rating = el.vote_average.toFixed(1);\n      const genre = filmGenresArray.join(', ');\n      return `<li class=\"cards__item \">    \n        <img src=\"https://image.tmdb.org/t/p/w500${src}\" alt=\"Movie\" class=\"movie-card__img\">\n        <div class=\"movie-card__info\">\n          <h2 class=\"movie-card__info-title\">${title}</h2>\n         <div class=\"movie-card_about\">  \n          <p class=\"movie-card__info-short\">Genre<span> | </span>${genre} </p>\n           <p class=\"movie-card__info-short\">${year}</p>\n          <p class=\"movie-card__info-rating\">${rating}</p>\n          </div>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  refs.cardsContainer.insertAdjacentHTML('afterbegin', cardListString);\n}\n"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$queueButton","document","querySelector","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","addedFilms","$cXfU0","getFromStorage","length","result","genresArray","genresObj","forEach","genre","id","cardListString","map","el","ref","ref1","filmGenresArray","genre_ids","title","year","release_date","slice","first_air_date","src","poster_path","rating","vote_average","toFixed","join","refs","cardsContainer","insertAdjacentHTML","$e5f0ec2bf84d8f14$var$cardRender","alert","addEventListener"],"version":3,"file":"library.81c9d899.js.map"}